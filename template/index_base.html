<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Minha TV</title>
<style>
body { background:#000; color:#fff; font-family:Arial; margin:0; padding:20px; }
h1 { margin-top:0; }
.player { width:100%; height:60vh; background:#000; margin-top:20px; }
button { margin:4px; padding:6px 10px; }
</style>
</head>
<body>

<h1>Minha TV</h1>
<p id="info"></p>

<div id="player" class="player"></div>
<div id="list"></div>

<script>
// Lista de vídeos (o GitHub Actions vai substituir "__VIDEOS__")
const VIDEOS = __VIDEOS__;

function extractId(url){
    let m = url.match(/youtu\\.be\\/([\\w-]{11})/);
    if(m) return m[1];
    m = url.match(/[?&]v=([\\w-]{11})/);
    if(m) return m[1];
    return null;
}

function play(n){
    let url = VIDEOS[n];
    let id = extractId(url);
    let player = document.getElementById("player");

    if(id){
        player.innerHTML = `
        <iframe width="100%" height="100%" 
            src="https://www.youtube.com/embed/${id}?playsinline=1&rel=0" 
            frameborder="0" allowfullscreen allow="autoplay; encrypted-media">
        </iframe>`;
    } else {
        player.innerHTML = `<video src="${url}" controls autoplay style="width:100%; height:100%"></video>`;
    }
}

function buildList(){
    let list = document.getElementById("list");
    list.innerHTML = "";
    VIDEOS.forEach((v,i)=>{
        let b = document.createElement("button");
        b.textContent = "Vídeo " + (i+1);
        b.onclick = ()=>play(i);
        list.appendChild(b);
    });
}

document.getElementById("info").innerHTML = "Esta TV contém " + VIDEOS.length + " vídeos.";
buildList();
play(0);
</script>

</body>
</html>
