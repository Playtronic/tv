    // Função para obter slot para exibição (ajustado para playlist, normal para grade)
    function obterSlotParaExibicao() {
        if (PROGRAMMING_MODE === 'grade') {
            return calcularSlotAtual();
        } else {
            // Modo Playlist: calcular slot bruto e ajustar
            const slotBruto = calcularSlotAtualPlaylist();
            const totalSlotsCanal = TV_PLAYLIST.length;
            
            if (totalSlotsCanal <= 0) {
                return 1;
            }
            
            // CORREÇÃO: Usar módulo para obter o número normalizado entre 1 e totalSlotsCanal
            // Exemplo: se slotBruto = 150 e totalSlotsCanal = 50, então ((150-1) % 50) + 1 = 50
            let slotAjustado = ((slotBruto - 1) % totalSlotsCanal) + 1;
            
            // Garantir que seja pelo menos 1 (nunca deve ser menor, mas por segurança)
            if (slotAjustado < 1) {
                slotAjustado = 1;
            }
            
            console.log('Slot para exibição (normalizado):', {
                slotBruto: slotBruto,
                totalSlots: totalSlotsCanal,
                slotExibicao: slotAjustado
            });
            
            return slotAjustado;
        }
    }
