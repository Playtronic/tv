<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jaspion</title>
    <link rel="icon" href="https://raw.githubusercontent.com/Playtronic/tv/refs/heads/main/template/favicon.png" type="image/png">
    <!-- SDKs Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <!-- METADADOS DE VERSÃO E CONTEÚDO ADULTO -->
    <meta name="version" content="1.0.0.9">
    <meta name="generator" content="Gerador de TV Online">
    <meta name="adult-content" content="false">
    <meta name="programming-mode" content="playlist">
    <style>
        /* ... (estilos mantidos iguais) ... */
    </style>
</head>
<body>
    <!-- ... (código HTML do canal mantido igual) ... -->
    
    <script>
        // CONFIGURAÇÕES DO CANAL
        const PROGRAMMING_MODE = "playlist";
        const TV_PROGRAMS = [];
        const TV_PLAYLIST = [{"name":"1  – O planeta de Edin","url":"https://content.jwplatform.com/videos/xKDNpLag-ZNSgm9Xt.mp4"},{"name":"2 – O triste fim de Sakura","url":"https://content.jwplatform.com/videos/mz0nxZ3c-ZNSgm9Xt.mp4"},{"name":"3 – O sonho do menino galáctico","url":"https://content.jwplatform.com/videos/FmBhozPp-ZNSgm9Xt.mp4"},{"name":"4 – A fúria do pântano","url":"https://content.jwplatform.com/videos/amjvqldc-ZNSgm9Xt.mp4"},{"name":"5 – O enigma da flauta","url":"https://content.jwplatform.com/videos/ay1ARGzv-ZNSgm9Xt.mp4"},{"name":"6 – Gordon em busca da mãe","url":"https://content.jwplatform.com/videos/EJA0GdAC-ZNSgm9Xt.mp4"},{"name":"7 – O demônio da montanha","url":"https://content.jwplatform.com/videos/1v7Gc8jw-ZNSgm9Xt.mp4"},{"name":"8 – O casal fugitivo","url":"https://content.jwplatform.com/videos/ZXNsImYn-ZNSgm9Xt.mp4"},{"name":"9 – A história de uma árvore","url":"https://content.jwplatform.com/videos/29HG0AoU-ZNSgm9Xt.mp4"},{"name":"10 – O ataque do Pyrossauro","url":"https://content.jwplatform.com/videos/GOzrMety-ZNSgm9Xt.mp4"},{"name":"11 – Perigo em Tsukuba","url":"https://content.jwplatform.com/videos/hNYiz8F7-ZNSgm9Xt.mp4"},{"name":"12 – A profecia","url":"https://content.jwplatform.com/videos/g3drsb4l-ZNSgm9Xt.mp4"},{"name":"13 – A investida dos aliados espaciais","url":"https://content.jwplatform.com/videos/OBK02z4X-ZNSgm9Xt.mp4"},{"name":"14 – Perigo na lagoa dos noivos","url":"https://content.jwplatform.com/videos/4oZcQPJC-ZNSgm9Xt.mp4"},{"name":"15 – Sonho ou ilusão? A imagem dourada","url":"https://content.jwplatform.com/videos/JHnr27LH-ZNSgm9Xt.mp4"},{"name":"16 – Qual o destino da humanidade?","url":"https://content.jwplatform.com/videos/kN4dZiFc-ZNSgm9Xt.mp4"},{"name":"17 – O mistério do Pássaro Dourado","url":"https://content.jwplatform.com/videos/ppzEgn0y-ZNSgm9Xt.mp4"},{"name":"18 – O inimigo imortal","url":"https://content.jwplatform.com/videos/LLVJTcDs-ZNSgm9Xt.mp4"},{"name":"19 – Alerta no oceano","url":"https://content.jwplatform.com/videos/1JlkWsKS-ZNSgm9Xt.mp4"},{"name":"20 – A última chance","url":"https://content.jwplatform.com/videos/38FnKl0v-ZNSgm9Xt.mp4"},{"name":"21 – O valente garoto jogador","url":"https://content.jwplatform.com/videos/Hk45k01X-ZNSgm9Xt.mp4"},{"name":"22 – O feitiço de Titânia","url":"https://content.jwplatform.com/videos/DTHVnbah-ZNSgm9Xt.mp4"},{"name":"23 – O monstro do século","url":"https://content.jwplatform.com/videos/jkeDFNxR-ZNSgm9Xt.mp4"},{"name":"24 – Ambição perigosa","url":"https://content.jwplatform.com/videos/Slu4kIyN-ZNSgm9Xt.mp4"},{"name":"25 – Tókio em perigo","url":"https://content.jwplatform.com/videos/WvbrLAz3-ZNSgm9Xt.mp4"},{"name":"26 – Contra ataque de Daileon","url":"https://content.jwplatform.com/videos/RANObqKk-ZNSgm9Xt.mp4"},{"name":"27 – Juventude ameaçadora","url":"https://content.jwplatform.com/videos/b2MwNMRV-ZNSgm9Xt.mp4"},{"name":"28 – Dados mortais do monstro eletrônico","url":"https://player.odycdn.com/api/v3/streams/free/JASPION---EP-28---DADOS-MORTAIS-DO-MONSTRO-ELETR%C3%94NICO-(Legendado-em-Portugu%C3%AAs)/147c2bed8635fe1c589d1abd9b76ce6924299678/a3b460.mp4"},{"name":"29 – A morte de Macgaren","url":"https://content.jwplatform.com/videos/vcl0FB3Q-ZNSgm9Xt.mp4"},{"name":"30 – O pânico do balão","url":"https://content.jwplatform.com/videos/ZSvXyFQu-ZNSgm9Xt.mp4"},{"name":"31 – Golpe na TV","url":"https://content.jwplatform.com/videos/ptayfTTA-ZNSgm9Xt.mp4"},{"name":"32 – A conspiração do robô","url":"https://content.jwplatform.com/videos/viwt0qhL-ZNSgm9Xt.mp4"},{"name":"33 – Batalha da magia negra","url":"https://content.jwplatform.com/videos/0JWbvwEr-ZNSgm9Xt.mp4"},{"name":"34 – A fortaleza indestrutível","url":"https://content.jwplatform.com/videos/8uDRGBzf-ZNSgm9Xt.mp4"},{"name":"35 – A descoberta do pergaminho","url":"https://content.jwplatform.com/videos/IUFkmhWe-ZNSgm9Xt.mp4"},{"name":"36 – O milagre das novas vidas","url":"https://content.jwplatform.com/videos/PzcURxL2-ZNSgm9Xt.mp4"},{"name":"37 – Cardápio infernal","url":"https://content.jwplatform.com/videos/sze8hiqH-ZNSgm9Xt.mp4"},{"name":"38 – Trama miraculosa","url":"https://content.jwplatform.com/videos/R6IdrG7r-ZNSgm9Xt.mp4"},{"name":"39 – O poderoso beijo de Myio","url":"https://content.jwplatform.com/videos/nM7iqzWx-ZNSgm9Xt.mp4"},{"name":"40 – O enigma do meteoro","url":"https://content.jwplatform.com/videos/Y3AD4FEH-ZNSgm9Xt.mp4"},{"name":"41 – O atirador da justiça","url":"https://content.jwplatform.com/videos/A4gJR1ww-ZNSgm9Xt.mp4"},{"name":"42 – A história de Pep e Hiroshi","url":"https://content.jwplatform.com/videos/Ev7rQ5Z3-ZNSgm9Xt.mp4"},{"name":"43 – O misterioso mundo de Satangoss","url":"https://content.jwplatform.com/videos/hjwTr0B4-ZNSgm9Xt.mp4"},{"name":"44 – Retorno satânico","url":"https://content.jwplatform.com/videos/6atbPvqH-ZNSgm9Xt.mp4"},{"name":"45 – Sou o filho de Satangoss!","url":"https://content.jwplatform.com/videos/y4CfY5qb-ZNSgm9Xt.mp4"},{"name":"46 – A união dos povos da Via Láctea ","url":"https://content.jwplatform.com/videos/cFG8f5Wv-ZNSgm9Xt.mp4"}];
        const TV_COMMERCIALS = [{"name":"Changeman Live Tokyo","url":"https://content.jwplatform.com/videos/ETtLqgyC-AA4yyFWW.mp4"},{"name":"Trailer Jaspion","url":"https://content.jwplatform.com/videos/jFC5MXWY-vYfy4io8.mp4"},{"name":"Vinheta 1","url":"https://content.jwplatform.com/videos/wFjZrXVP-AA4yyFWW.mp4"},{"name":"Filosofia Playtronic","url":"https://content.jwplatform.com/videos/G6R6mwOA-QOMvb1pf.mp4"},{"name":"Bad Block","url":"https://content.jwplatform.com/videos/Sm8vyPQ9-AA4yyFWW.mp4"},{"name":"Vinheta 2","url":"https://content.jwplatform.com/videos/dP99t8dl-KFbcw7fC.mp4"},{"name":"Jump Ramon","url":"https://cdn.jwplayer.com/videos/eZKGUPml-bzWrVHxQ.mp4"},{"name":"Jaspion Comercial japonês","url":"https://cdn.jwplayer.com/videos/A3nhREmR-AA4yyFWW.mp4"},{"name":"Vinheta 1","url":"https://content.jwplatform.com/videos/wFjZrXVP-AA4yyFWW.mp4"},{"name":"CDZ Brinquedo","url":"https://cdn.jwplayer.com/videos/SubY2iZG-KFbcw7fC.mp4"},{"name":"Spadiun Laser","url":"https://cdn.jwplayer.com/videos/YlPaquOj-AA4yyFWW.mp4"},{"name":"Vinheta 2","url":"https://content.jwplatform.com/videos/dP99t8dl-KFbcw7fC.mp4"},{"name":"Spielvan Glasslite","url":"https://cdn.jwplayer.com/videos/pV9DqW72-KFbcw7fC.mp4"},{"name":"SNES Macacos","url":"https://cdn.jwplayer.com/videos/sgYjNGT7-bzWrVHxQ.mp4"},{"name":"Vinheta 1","url":"https://content.jwplatform.com/videos/wFjZrXVP-AA4yyFWW.mp4"},{"name":"Chiclete Jaspion","url":"https://cdn.jwplayer.com/videos/B5LWdxSy-AA4yyFWW.mp4"},{"name":"Jaspion Glasslite","url":"https://cdn.jwplayer.com/videos/aZJNwbX1-KFbcw7fC.mp4"},{"name":"Vinheta 2","url":"https://content.jwplatform.com/videos/dP99t8dl-KFbcw7fC.mp4"},{"name":"Mesbla","url":"https://cdn.jwplayer.com/videos/oXTkrPNE-AA4yyFWW.mp4"},{"name":"Winspector","url":"https://cdn.jwplayer.com/videos/G4aCqEHd-bzWrVHxQ.mp4"},{"name":"Vinheta 1","url":"https://content.jwplatform.com/videos/wFjZrXVP-AA4yyFWW.mp4"},{"name":"Toei Animation","url":"https://content.jwplatform.com/videos/bUJSdbVs-KFbcw7fC.mp4"},{"name":"Revista Manchete","url":"https://content.jwplatform.com/videos/3dLzjyZK-AA4yyFWW.mp4"},{"name":"Vinheta 2","url":"https://content.jwplatform.com/videos/dP99t8dl-KFbcw7fC.mp4"},{"name":"Change Kit","url":"https://content.jwplatform.com/videos/IGZ1CmYY-AA4yyFWW.mp4"},{"name":"Jiban Glasslite","url":"https://content.jwplatform.com/videos/cFijtFyw-bzWrVHxQ.mp4"},{"name":"Vinheta 1","url":"https://content.jwplatform.com/videos/wFjZrXVP-AA4yyFWW.mp4"},{"name":"Budda Box","url":"https://content.jwplatform.com/videos/n3qAIV68-KFbcw7fC.mp4"},{"name":"Micro Machines 4X4","url":"https://content.jwplatform.com/videos/MBOepY3w-bzWrVHxQ.mp4"},{"name":"Vinheta 2","url":"https://content.jwplatform.com/videos/dP99t8dl-KFbcw7fC.mp4"}];
        const ENABLE_COMMERCIALS = true;
        const COMMERCIALS_PER_BREAK = 3;
        const COMMERCIALS_ORDER = "sequential";
        const GRADE = [];
        const TOTAL_SLOTS = 58;
        const SLOT_DURATION = 25;
        const SHOW_TIME = true;
        const ENABLE_REWIND_10 = true;
        const ENABLE_RESTART = true;
        const ENABLE_LIVE = true;
        const ENABLE_DEBUG = true;
        const IS_ADULT_CONTENT = false;
        const RELEASE_DATE = "2025-12-06";
        const CUSTOM_RELEASE_DATE = true;
        const IS_OFFLINE = false;
        const CHANNEL_VERSION = "1.0.0.9";
        const CHANNEL_ID = "jaspion";
        
        // ==================== NOVO SISTEMA DE CÁLCULO DE SLOTS ====================
        
        // Função para obter a data de estreia ajustada
        function obterDataEstreiaAjustada(releaseDate, isCustomReleaseDate) {
            const agora = new Date();
            
            if (!isCustomReleaseDate || !releaseDate) {
                const horaAtual = agora.getHours();
                
                if (horaAtual >= 0 && horaAtual < 6) {
                    const ontem = new Date(agora);
                    ontem.setDate(ontem.getDate() - 1);
                    ontem.setHours(6, 0, 0, 0);
                    return ontem;
                } else {
                    const hoje = new Date(agora);
                    hoje.setHours(6, 0, 0, 0);
                    return hoje;
                }
            }
            
            const dataEstreia = new Date(releaseDate);
            dataEstreia.setHours(6, 0, 0, 0);
            return dataEstreia;
        }
        
        // Função para calcular slot atual no modo playlist
        function calcularSlotAtualPlaylist() {
            const agora = new Date();
            const dataEstreia = obterDataEstreiaAjustada(RELEASE_DATE, CUSTOM_RELEASE_DATE);
            const diferencaMs = agora.getTime() - dataEstreia.getTime();
            const minutosDecorridos = Math.floor(diferencaMs / (1000 * 60));
            const slotCalculado = Math.floor(minutosDecorridos / 25);
            
            if (slotCalculado < 0) {
                return 0;
            }
            
            if (TV_PLAYLIST.length === 0) {
                return 0;
            }
            
            let slotAjustado = slotCalculado;
            
            while (slotAjustado >= TV_PLAYLIST.length) {
                slotAjustado -= TV_PLAYLIST.length;
            }
            
            if (slotAjustado <= 0) {
                slotAjustado = 1;
            }
            
            return slotAjustado - 1;
        }
        
        // Função para calcular slot atual no modo grade
        function calcularSlotAtualGrade() {
            const agora = new Date();
            const horas = agora.getHours();
            const minutos = agora.getMinutes();
            
            let horasAjustadas = horas;
            if (horas < 6) {
                horasAjustadas += 24;
            }
            
            const minutosDesde6h = (horasAjustadas - 6) * 60 + minutos;
            let slotAtual = Math.floor(minutosDesde6h / 25);
            
            if (slotAtual >= 58) {
                slotAtual = 57;
            }
            
            if (horas < 6) {
                slotAtual = 58 + Math.floor(horas * 60 + minutos) / 25;
                if (slotAtual >= 72) {
                    slotAtual = 71;
                }
            }
            
            return slotAtual;
        }
        
        // Função principal para calcular slot atual
        function calcularSlotAtual() {
            if (PROGRAMMING_MODE === 'grade') {
                return calcularSlotAtualGrade();
            } else {
                return calcularSlotAtualPlaylist();
            }
        }
        
        // Função para calcular dias desde a estreia
        function calcularDiasDesdeEstreia() {
            const dataEstreia = obterDataEstreiaAjustada(RELEASE_DATE, CUSTOM_RELEASE_DATE);
            const dataAtualCanal = obterDataAtualCanal();
            
            if (dataAtualCanal < dataEstreia) {
                return 1;
            }
            
            const diferencaMs = dataAtualCanal.getTime() - dataEstreia.getTime();
            const diasDesdeEstreia = Math.floor(diferencaMs / (1000 * 60 * 60 * 24));
            const diaProgramacao = diasDesdeEstreia + 1;
            
            return Math.max(1, diaProgramacao);
        }
        
        // Função auxiliar para obter data atual do canal
        function obterDataAtualCanal() {
            const agora = new Date();
            const horaAtual = agora.getHours();
            
            if (horaAtual >= 0 && horaAtual < 6) {
                const ontem = new Date(agora);
                ontem.setDate(ontem.getDate() - 1);
                ontem.setHours(6, 0, 0, 0);
                return ontem;
            } else {
                const hoje = new Date(agora);
                hoje.setHours(6, 0, 0, 0);
                return hoje;
            }
        }
        
        // ... (restante do código JavaScript do canal) ...
        
        // Inicializar quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar slot inicial
            const slotAtual = calcularSlotAtual();
            const diasDesdeEstreia = calcularDiasDesdeEstreia();
            
            console.log('Slot atual:', slotAtual);
            console.log('Dias desde estreia:', diasDesdeEstreia);
            
            // Inicializar player com base no slot atual
            // ... (código de inicialização do player) ...
        });
    </script>
</body>
</html>