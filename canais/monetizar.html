async function generateChannelHTML(channelData, playlist, customCSS, channelId) {
    try {
        // Buscar código de monetização
        let monetizationCode = '';
        if (window.monetizationProcessor) {
            monetizationCode = await monetizationProcessor.getMonetizationCode(channelId);
        }
        
        // Construir HTML incluindo monetização
        const html = `
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${channelData.name || 'Canal de TV Online'}</title>
    <link rel="icon" href="${channelData.logo || DEFAULT_LOGO}" type="image/png">
    
    <style>
        /* CSS personalizado */
        ${customCSS}
        
        /* Estilos para monetização */
        #pix-donation-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .ad-container {
            max-width: 728px;
            margin: 15px auto;
            text-align: center;
        }
    </style>
    
    <!-- Código de monetização -->
    <script>
        ${monetizationCode || '// Sistema de monetização não configurado'}
    </script>
</head>
<body>
    <!-- Seu conteúdo normal do canal aqui -->
    
    <script>
        // Script principal do canal
        // ...
    </script>
</body>
</html>`;
        
        return html;
        
    } catch (error) {
        console.error('Erro ao gerar HTML:', error);
        throw error;
    }
}
